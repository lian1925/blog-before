<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/css/base.css?v=1.2">
  <link rel="icon" type="image/png" href="/img/robot.png">
  <link rel="stylesheet" href="/css/post.css?v=1.2">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_407924_kx6yx3r9q4m6xbt9.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css" />

  <title>
    Vue | 知识淬炼 |
      小梁哥的个人网站
  </title>
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>

<body>
  <div class="container">
    <div class="header">

      <a class="home-title" style="cursor:default;" onclick="javascript:void(0);return false;"><span>小梁哥的个人网站
        <i class="iconfont icon-shuangjiantou-copy"></i>
      </span></a>

      <a href="/home/">首页</a>
      <span><i class="iconfont icon-shuangjiantou-copy"></i></span>
      <a href="/tags/淬炼/">
        淬炼
      </a>
      <div class="search">
        <input type="text" placeholder="搜索">
        <i class="iconfont icon-sousuo"></i>
      </div>
    </div>
    <div class="post">
      <h1>Vue | 知识淬炼</h1>
      <div class="post-meta">
        <p>作者： Lian</p>
        <p>日期：
          2018年02月05日 11:02
        </p>
      </div>
      <div class="share-button"></div>
    </div>
    <div class="page">
      <h2 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h2><p>是一套用于构建用户界面的渐进式框架。</p>
<p>渲染<br>核心是允许用简洁的声明式语法，将数据渲染进DOM中。<br>如：<br>1、插入文本</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    message<span class="token punctuation">:</span><span class="token string">'Hello Vue!'</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>2、绑定标签属性</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app-2"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>span v<span class="token operator">-</span>bind<span class="token punctuation">:</span>title<span class="token operator">=</span><span class="token string">"message"</span><span class="token operator">></span>
鼠标悬停
<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app-2'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    message<span class="token punctuation">:</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>3、条件</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app-3"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"seen"</span><span class="token operator">></span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app-3'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    seen<span class="token punctuation">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>4、循环</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>ol<span class="token operator">></span>
<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"todo in todos"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> todo<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    todos<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>text<span class="token punctuation">:</span> <span class="token string">'one'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>text<span class="token punctuation">:</span> <span class="token string">'two'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>text<span class="token punctuation">:</span> <span class="token string">'three'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>5、按键事件</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token punctuation">:</span>click<span class="token operator">=</span><span class="token string">"reverseMessage"</span><span class="token operator">></span>逆转<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    message<span class="token punctuation">:</span><span class="token string">'Hello Vue.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    reverseMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>6、输入处理</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"message"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    message<span class="token punctuation">:</span><span class="token string">'Hello'</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>组件化<br>vue.js允许我们用独立和可复用的组件构建大型应用。这种编程方式，我们称为组件化。</p>
<p>组件<br>本质是一个拥有预定义选项的Vue实例。<br>1、注册</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'item'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  template<span class="token punctuation">:</span><span class="token string">'&lt;li>代办项&lt;/li>'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>2、调用</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>ol<span class="token operator">></span>
<span class="token operator">&lt;</span>item<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>item<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
</code></pre>
<p>好了，有人可能会说这样太呆板了。如果我们能从父作用域将数据传到子组件，看起来才酷炫。</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'item'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'todo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span><span class="token string">'&lt;li>{{ todo.text }}&lt;/li>'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>ol<span class="token operator">></span>
<span class="token operator">&lt;</span>item v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in list"</span> v<span class="token operator">-</span>bind<span class="token punctuation">:</span>todo<span class="token operator">=</span><span class="token string">"item"</span> v<span class="token operator">-</span>bind<span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>item<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    list<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>text<span class="token punctuation">:</span><span class="token string">'one'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>text<span class="token punctuation">:</span><span class="token string">'two'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>text<span class="token punctuation">:</span><span class="token string">'three'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>数据绑定<br>当vue实例被创建时，会向其data对象加入一些属性。当这些属性的值发生改变，视图将发生同步变化。</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> data <span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span>data
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

vm<span class="token punctuation">.</span>a <span class="token operator">===</span> data<span class="token punctuation">.</span>a

data<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span>
vm<span class="token punctuation">.</span>a <span class="token comment" spellcheck="true">//2</span>

vm<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">3</span>
data<span class="token punctuation">.</span>a <span class="token comment" spellcheck="true">//3</span>
</code></pre>
<p>注意，只有创建时，添加的属性才会双向绑定。<br>当然，如果你想阻止双向绑定，可以使用Object.freeze()方法</p>
<p>生命周期钩子<br>Vue实例在创建时都要经历一系列的初始化过程。如：<br>beforeCreate created beforeMount mounted beforeDestroy destroyed</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  created<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>语法<br>1、文本<br>数据绑定最常见的方式就是采用双括号的数据绑定</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
</code></pre>
<p>2、原始html<br>双括号会将数据解释成普通文本，故如果想要输出HTML效果，需要使用v-html指令。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>rawHtml<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span>p v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">"rawHtml"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
</code></pre>
<p>3、JavaScript语法支持<br>对于所有的数据绑定，Vue都提供了完全的JavaScript表达式支持。</p>
<pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span><span class="token punctuation">{</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>div v<span class="token operator">-</span>bind<span class="token punctuation">:</span>id<span class="token operator">=</span><span class="token string">"'list-'+id"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>注意，只对表达式生效</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//不生效</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p>指令<br>指令(directives)是带有v-前缀的特殊属性。其职责是：当表达式的值改变时，同步作用于DOM。</p>
<p>缩写<br>v-前缀作为一种视觉提示，用于识别vue的属性。不过，有些指令频繁用到，则会感到麻烦。因此vue为v-bind和v-on提供了缩写用法。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>a v<span class="token operator">-</span>bind<span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string">"url"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
<span class="token operator">&lt;</span>a <span class="token punctuation">:</span>href<span class="token operator">=</span><span class="token string">"url"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>

<span class="token operator">&lt;</span>a v<span class="token operator">-</span>on<span class="token punctuation">:</span>click<span class="token operator">=</span><span class="token string">"do"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
<span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">"do"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
</code></pre>
<p>计算属性<br>模板内的表达式非常便利，它的初衷是用于简单的计算。如果计算逻辑过大，则应该使用计算属性。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>reverseMessage<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    message<span class="token punctuation">:</span><span class="token string">'Hello'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    reverseMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>属性 vs 方法<br>上面的表达式可以使用方法调用，得到的结果</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token function">reverseMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
</code></pre>
<p>这两种方法有什么不同？<br>计算属性基于他们的依赖，只有相关依赖变化时才会重新求值。<br>相比之下，每次触发渲染，调用方法总会重新计算。</p>
<p>侦听属性<br>相对计算属性，Vue提供了一种更加通用的方法来监听vue实例的数据变化：watch，又称侦听属性。<br>示例</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>fullName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span><span class="token string">'Li'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span><span class="token string">'lian'</span><span class="token punctuation">,</span>
    fullName<span class="token punctuation">:</span><span class="token string">'Li lian'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span><span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fullName<span class="token operator">=</span>val<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fullName<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>val
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>若使用计算属性，则简单很多</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span><span class="token string">'Li'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span><span class="token string">'lian'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    fullName<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>然而，在数据变化时，需要执行异步或开销较大时，侦听方法是最有用的。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"watch"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"question"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>answer<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#watch'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    question<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
    answer<span class="token punctuation">:</span><span class="token string">'until'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span><span class="token punctuation">{</span>
    question<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">,</span>old<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>answer <span class="token operator">=</span> <span class="token string">'waite'</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAnswer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    getAnswer<span class="token punctuation">:</span> _<span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>question<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>answer<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>answer<span class="token operator">=</span><span class="token string">'think'</span>
        <span class="token keyword">var</span> vmm<span class="token operator">=</span><span class="token keyword">this</span>
        axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'https://'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
          vmm<span class="token punctuation">.</span>answer<span class="token operator">=</span>_<span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>answer<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
          vmm<span class="token punctuation">.</span>answer<span class="token operator">=</span><span class="token string">'error'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token number">500</span>
      <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>这个例子中，watch 允许我们执行异步操作，限制操作频率，且在得到结果之前，设置中间状态，这是计算属性无法做到的。</p>
<p>样式<br>为HTML标签添加样式，是一个常见需求。我们应该如何操作呢？v-bind可以处理属性，而class正好是属性，因此可以使用v-bind。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'static'</span>
v<span class="token operator">-</span>bind<span class="token punctuation">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"{active:isActive}"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

data<span class="token punctuation">:</span><span class="token punctuation">{</span>
  isActive<span class="token punctuation">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre>
<p>渲染结果为：</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static active"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>组件<br>当组件使用class属性，当新的class添加到其根元素上，取两者的并集。</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'com'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  template<span class="token punctuation">:</span><span class="token string">'&lt;p class="foo bar">&lt;/p>'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>com <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"baz boo"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>com<span class="token operator">></span>
</code></pre>
<p>渲染结果</p>
<p class="foo bar baz boo"></p>

<p>条件</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>h1 v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"ok"</span><span class="token operator">></span>yes<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token operator">&lt;</span>h1 v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">></span>no<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
</code></pre>
<p>注意，v-else必须紧跟在v-if或v-else-if后，否则不被识别。</p>
<p>分组<br>v-if是一个指令，所以必须添加到一个元素。如果想对多个元素进行条件判断，则可以使用<template>进行包裹，其最终结果不包含<template>元素</template></template></p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"ok"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>h1<span class="token operator">></span>a<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
</code></pre>
<p>复用<br>基于高效原则，vue通常会复用已有元素而不是从头开始。<br>有时这不符合实际需求，Vue提供一种方式来表达“这两种元素是完全独立的，不用复用它们”。只需要添加唯一值的key.</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"loginType === 'username'"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>label<span class="token operator">></span>Username<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token operator">&lt;</span>input placeholder<span class="token operator">=</span><span class="token string">"Enter your username"</span> key<span class="token operator">=</span><span class="token string">"username-input"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>label<span class="token operator">></span>Email<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token operator">&lt;</span>input placeholder<span class="token operator">=</span><span class="token string">"Enter your email address"</span> key<span class="token operator">=</span><span class="token string">"email-input"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
</code></pre>
<p>列表<br>使用v-for指令，可以将一个数组，渲染成一组列表元素。<br>其中需要使用item in items形式的特殊语法，items代表原数据数组，而item是数组的元素项。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in items"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>

<span class="token keyword">var</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    items<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>message<span class="token punctuation">:</span><span class="token string">'one'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>message<span class="token punctuation">:</span><span class="token string">'two'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>v-for还支持一个可选的第二个参数作为当前项的索引。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in items"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
</code></pre>
<p>对象<br>一个对象往往有多个属性，可以通过v-for来遍历对象的属性。<br>分为三个层次：<br>1、只遍历属性</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"value in object"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    object<span class="token punctuation">:</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span><span class="token string">'li'</span><span class="token punctuation">,</span>
      age<span class="token punctuation">:</span><span class="token number">25</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>2、遍历属性和键名</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(value,key) in object"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
</code></pre>
<p>3、遍历属性，键名和索引</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(value,key,index) in object"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
</code></pre>
<p>策略<br>默认情况下，为保证高效，v-for在更新已渲染过的列表时，采用”就地复用”策略，即仅是简单复用此处的每个元素，即使数据项顺序改变，它也不会重新匹配。</p>
<p>正式开发中，则建议提供vue一个提示，方便其跟踪每个节点的身份，实现重用和重新排序现有元素。具体的做法是为每项元素提供一个唯一的key属性。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in items"</span><span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
</code></pre>
<p>数组更新检测<br>数组有两种更新方法：变异与非变异<br>变异指直接在原有数组更新，相关方法有：<br>push pop shift unshift splice sort reverse</p>
<pre class=" language-js"><code class="language-js">vm<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token punctuation">:</span><span class="token string">'four'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>非变异指不改变原数组，返回一个新数组，用于替代原数组，相关方法有：<br>concat() slice() filter()</p>
<pre class=" language-js"><code class="language-js">vm<span class="token punctuation">.</span>items <span class="token operator">=</span> vm<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> itme<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/four/</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>注意事项<br>由于JavaScript的限制，Vue不能检测以下变动的数组。<br>1、当你直接利用数组的索引赋值，如：<br>vm.items[indexOfItem]= newValue<br>2、当你修改数组的长度，如：<br>vm.items.length = newLength<br>解决方案：<br>1、使用Array.prototype.splice<br>vm.items.splice(indexOfItem,1,newValue)<br>vm.items.splice(newLength)</p>
<p>对象更新检测<br>还是因为JavaScript的限制，Vue不能检测对象属性的添加与删除。</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// invalid</span>
vm<span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token number">2</span>
</code></pre>
<p>解决方案：<br>使用Object.assign()</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    userProfile<span class="token punctuation">:</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span><span class="token string">'li'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
vm<span class="token punctuation">.</span>userProfile <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>vm<span class="token punctuation">.</span>userProfile<span class="token punctuation">,</span><span class="token punctuation">{</span>
  age<span class="token punctuation">:</span><span class="token number">27</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>过滤结果<br>有时，我们想要显示一个数组的过滤结果，但是不希望改变原数组，因为原数组可能还有其他用途。<br>策略，使用method方法</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"n in even(numbers)"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>

data<span class="token punctuation">:</span><span class="token punctuation">{</span>
  numbers<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
method<span class="token punctuation">:</span><span class="token punctuation">{</span>
  even<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>多元素<br>有时，我们希望处理多元素的显示。类似于v-if，这时可以使用<template>标签。</template></p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in items"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>items<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
</code></pre>
<p>v-for 与 v-if 优先级<br>在同一节点时，v-for的优先级比v-if更高</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"todo in todos"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"!todo.isComplete"</span><span class="token operator">></span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>todo<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
</code></pre>
<p>以上代码只显示了未完成的todos</p>
<p>组件<br>在自定义组件中，你可以像普通元素一样使用v-for</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>com v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in items"</span><span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>com<span class="token operator">></span>
</code></pre>
<p>如果需要将数据传到组件内，我们要用props</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>input
v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"newTodo"</span>
v<span class="token operator">-</span>on<span class="token punctuation">:</span>keyup<span class="token punctuation">.</span>enter<span class="token operator">=</span><span class="token string">"addNew"</span>
placeholder<span class="token operator">=</span><span class="token string">"Add a todo"</span>
<span class="token operator">></span>
<span class="token operator">&lt;</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span>li
is<span class="token operator">=</span><span class="token string">"todo-item"</span>
v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(todo,index) in todos"</span>
v<span class="token operator">-</span>bind<span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"todo.id"</span>
v<span class="token operator">-</span>bind<span class="token punctuation">:</span>title<span class="token operator">=</span><span class="token string">"todo.title"</span>
v<span class="token operator">-</span>on<span class="token punctuation">:</span>remove<span class="token operator">=</span><span class="token string">"todos.splice(index,1)"</span>
<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'todo-item'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`\
  &lt;li>\
  {{title}}\
  &lt;button v-on:click="$emit(\'remove\')">x&lt;/button>\
  &lt;/li>\
  `</span></span>
  props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    newTodo<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
    todos<span class="token punctuation">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">'one'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">'two'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    nextTodoId<span class="token punctuation">:</span><span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    addNewTodo<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>nextTodoId<span class="token operator">++</span><span class="token punctuation">,</span>
        title<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>newTodo
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>newTdoText<span class="token operator">=</span><span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>事件处理<br>我们可以用v-on监听DOM事件，并在触发时执行一些JavaScript代码。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token punctuation">:</span>click<span class="token operator">=</span><span class="token string">"counter++"</span><span class="token operator">></span>add one <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    counter<span class="token punctuation">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>很多事件处理逻辑很复杂，所以直接将JavaScript代码写在指令中是不可行的。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token punctuation">:</span>click<span class="token operator">=</span><span class="token string">"greet"</span><span class="token operator">></span>Greet
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'vue'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    greet<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>even<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

vm<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//=>'vue'</span>
</code></pre>
<p>事件修饰符<br>修饰符由点开头，加指令后缀表示。作为对事件的修饰。</p>
<p>按键修饰符<br>在一些监听任务时，我们需要监听特定的按键事件。<br>我们的键盘，每个按键都对应一个唯一的keycode,故我们可以根据keycode监听事件。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>on<span class="token punctuation">:</span>keyup<span class="token number">.13</span><span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>
</code></pre>
<p>记住所有的keycode是很困难的，Vue为常用的按键提供了别名,如：<br>.enter .tab .delete .space .up .down .left .right</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>on<span class="token punctuation">:</span>keyup<span class="token punctuation">.</span>enter<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>
</code></pre>
<p>表单<br>v-model负责监听用户的输入事件和更新数据。<br>1、单行文本</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"message"</span> placeholder<span class="token operator">=</span><span class="token string">"edit me"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
</code></pre>
<p>2、多行文本</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>textarea v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"message"</span> placeholder<span class="token operator">=</span><span class="token string">"multiple input"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
</code></pre>
<p>3、复选框</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> id<span class="token operator">=</span><span class="token string">"check"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"checked"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"check"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>checked<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
</code></pre>
<p>4、单选框</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> id<span class="token operator">=</span><span class="token string">"one"</span> value<span class="token operator">=</span><span class="token string">"one"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"picked"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"one"</span><span class="token operator">></span>one<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> id<span class="token operator">=</span><span class="token string">"two"</span> value<span class="token operator">=</span><span class="token string">"two"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"picked"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"two"</span><span class="token operator">></span>two<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
</code></pre>
<p>5、下拉菜单</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"selected"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>option disabled value<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>请选择<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
<span class="token operator">&lt;</span>option<span class="token operator">></span>A<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
<span class="token operator">&lt;</span>option<span class="token operator">></span>B<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>修饰符<br>用于辅助按键输入<br>延时同步输入.lazy</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>lazy<span class="token operator">=</span><span class="token string">"msg"</span><span class="token operator">></span>
</code></pre>
<p>将用户输入转化为数值.number</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">'age'</span> type<span class="token operator">=</span><span class="token string">'number'</span><span class="token operator">></span>
</code></pre>
<p>过滤输入的首尾空白字符.trim</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">"msg"</span><span class="token operator">></span>
</code></pre>
<p>组件<br>组件有两种注册方式：全局和局部</p>
<p>注意事项<br>当使用DOM作为模板时，你可能会受到HTML的一些限制，如:ul,ol,table,select</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>table<span class="token operator">></span>
<span class="token operator">&lt;</span>my<span class="token operator">-</span>row<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>row<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>
<span class="token comment" spellcheck="true">// invalid</span>
</code></pre>
<p>变通的方案是使用is特性</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>table<span class="token operator">></span>
<span class="token operator">&lt;</span>tr is<span class="token operator">=</span><span class="token string">"my-row"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>
</code></pre>
<p>data必须是函数</p>
<p>组合<br>组件设计的初衷是为了组合使用，最常见的方式是父子组合，即组件A使用了组件B。它们之间必然要相互通信：父组件通过prop给子组件下发数据，子组件通过事件给父组件发送消息。<br>总结为：prop向下传递，事件向上传递。</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'child'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span><span class="token string">'&lt;p>{{message}}&lt;/p>'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>child message<span class="token operator">=</span><span class="token string">'hello'</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">></span>
</code></pre>
<p>注意<br>因为HTML不分大小写，所以在HTML中需要转换为短横线命名。</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'child'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'myMessage'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span><span class="token string">'{{myMessage}}'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>child my<span class="token operator">-</span>message<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">></span>
</code></pre>
<p>易错点<br>初学者容易出错的地方，在于采用字面量语法传递数值。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>comp some<span class="token operator">-</span>prop<span class="token operator">=</span><span class="token string">'1'</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">></span>

<span class="token operator">&lt;</span>comp v<span class="token operator">-</span>bind<span class="token punctuation">:</span>some<span class="token operator">-</span>prop<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">></span>
</code></pre>
<p>单向数据流引发的问题</p>
<p>prop验证<br>为组件的prop指定验证规则，在开发中非常有用。如果传入的数据不符合要求，Vue会发出警告。<br>语法：用对象的形式来定义prop</p>
<pre><code>
</code></pre><p>非prop特性<br>指不需要定义prop，直接将参数传入组件。</p>
<p>合并<br>对于class 和style特性，传递给组件的值，会与组件本身的值合并。</p>
<p>Vue实例有两个事件接口：<br>1、监听接口，$on(evenName)<br>2、触发接口，，$emit(eventName)<br>示例</p>
<p>浪子回头<br>.sync</p>
<p>解析表单输入</p>

    </div>
    <h2 class="post-nav">
      
      <a href="/2018/02/05/online-webpack/" class="prev">上一篇：Webpack | 知识淬炼</a>
      
      <a href="#" class="next">下一篇：无</a>

    </h2>

    <div class="footer">
      Copyright @ <a href="/">lian</a> | 2009-2017
    </div>
  </div>

  <script src="/js/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
  <script src="/js/post.js"></script>


</body>

</html>

